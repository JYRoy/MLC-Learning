# Triton Passes

- [Triton Passes](#triton-passes)
  - [Overview](#overview)

## Overview

Triton中的所有passes都在python/src/passes.cc中被注册到libtriton.passes的module中

- passes：TritonIR、TritonGPUIR和LLVMIR依赖的所有passes
  - analysis
    - ModuleAllocation
    - ModuleMembarAnalysis
  - common
    - SCCP
    - SymbolDCE
    - Inliner
    - Canonicalizer
    - CSE
    - LoopInvariantCodeMotion
  - convert
    - ConvertSCFToCF
    - ConvertControlFlowToLLVM
    - CovertIndexToLLVM
    - ArithToLLVMConversion
  - ttir
    - CombineOps
    - ReorderBroadcast
    - RewriteTensorPointer
    - ConvertTensorPointer
    - ConvertTritonToTritonGPU：给每个tensor分配layout
  - ttgpuir
    - TritonGPUCoalesce：针对load和store修改layout，合并全局访存
    - TritonGPUOptimizeThreadLocality
    - TritonGPUPipeline
    - TritonGPUAccelerateMatMul：修改layout以使用tensor core，软流水，back conflict去除
    - TritonGPUReorderInstructions
    - TritonGPUF32DotTC
    - TritonGPUOptimizerDotOperands
    - TritonGPURemoveLaytoutConversions：沿着数据流传播layout，消除不必要的layout转换
    - TritonGPUReduceDataDuplication
    - AllocateSharedMemory
    - TritonGPUCombineTensorSelectAndIf
  - nvidia
    - ConvertTritonGPUToLLVM：生成SIMT的LLVMIR。添加shared memroy和barrier。
    - DecomposeUnsupportedConversions
  - llvmir
    - LLVMDIScope

从功能上划分，有些pass是优化IR的，有些pass是转换IR的。

有些是Triton中实现的，有些是MLIR中原本就存在的。

